{"ast":null,"code":"import _defineProperty from \"/Users/paulbickell/Documents/React/react-dtt-ideas-v1/react-dtt-demo-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/paulbickell/Documents/React/react-dtt-ideas-v1/react-dtt-demo-app/src/components/login.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport Joi from \"joi\";\nimport Form from \"../common/form\";\n\nclass LoginForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        username: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const state = this.props.location.state;\n        window.location = state ? state.from.pathname : \"/\";\n      } catch (e) {\n        if (e.response && e.response.status === 400) {\n          const errors = _objectSpread({}, this.state.errors); // put the error against username only\n\n\n          errors.username = e.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, this.renderInput(\"username\", \"Username\", true), this.renderInput(\"password\", \"Password\", false, \"300px\", \"password\"), this.renderButton(\"Login\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/paulbickell/Documents/React/react-dtt-ideas-v1/react-dtt-demo-app/src/components/login.jsx"],"names":["React","Joi","Form","LoginForm","state","data","username","password","errors","schema","string","required","label","doSubmit","props","location","window","from","pathname","e","response","status","setState","render","handleSubmit","renderInput","renderButton"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;;AAEA,MAAMC,SAAN,SAAwBD,IAAxB,CAA6B;AAAA;AAAA;AAAA,SAC3BE,KAD2B,GACnB;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,QAAQ,EAAE,EAAZ;AAAgBC,QAAAA,QAAQ,EAAE;AAA1B,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADmB;AAAA,SAM3BC,MAN2B,GAMlB;AACPH,MAAAA,QAAQ,EAAEL,GAAG,CAACS,MAAJ,GACPC,QADO,GAEPC,KAFO,CAED,UAFC,CADH;AAIPL,MAAAA,QAAQ,EAAEN,GAAG,CAACS,MAAJ,GACPC,QADO,GAEPC,KAFO,CAED,UAFC;AAJH,KANkB;;AAAA,SAe3BC,QAf2B,GAehB,YAAY;AACrB,UAAI;AAAA,cACMT,KADN,GACgB,KAAKU,KAAL,CAAWC,QAD3B,CACMX,KADN;AAEFY,QAAAA,MAAM,CAACD,QAAP,GAAkBX,KAAK,GAAGA,KAAK,CAACa,IAAN,CAAWC,QAAd,GAAyB,GAAhD;AACD,OAHD,CAGE,OAAOC,CAAP,EAAU;AACV,YAAIA,CAAC,CAACC,QAAF,IAAcD,CAAC,CAACC,QAAF,CAAWC,MAAX,KAAsB,GAAxC,EAA6C;AAC3C,gBAAMb,MAAM,qBAAQ,KAAKJ,KAAL,CAAWI,MAAnB,CAAZ,CAD2C,CAG3C;;;AACAA,UAAAA,MAAM,CAACF,QAAP,GAAkBa,CAAC,CAACC,QAAF,CAAWf,IAA7B;AACA,eAAKiB,QAAL,CAAc;AAAEd,YAAAA;AAAF,WAAd;AACD;AACF;AACF,KA5B0B;AAAA;;AA8B3Be,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,IAAzC,CADH,EAEG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,KAAzC,EAAgD,OAAhD,EAAyD,UAAzD,CAFH,EAGG,KAAKC,YAAL,CAAkB,OAAlB,CAHH,CAFF,CADF;AAUD;;AAzC0B;;AA4C7B,eAAevB,SAAf","sourcesContent":["import React from \"react\";\nimport Joi from \"joi\";\nimport Form from \"../common/form\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\" },\n    errors: {}\n  };\n\n  schema = {\n    username: Joi.string()\n      .required()\n      .label(\"Username\"), \n    password: Joi.string()\n      .required()\n      .label(\"Password\")\n  };\n\n  doSubmit = async () => {\n    try {\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : \"/\";\n    } catch (e) {\n      if (e.response && e.response.status === 400) {\n        const errors = { ...this.state.errors };\n        \n        // put the error against username only\n        errors.username = e.response.data; \n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <h1>Login</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"username\", \"Username\", true)}\n          {this.renderInput(\"password\", \"Password\", false, \"300px\", \"password\")}\n          {this.renderButton(\"Login\")}\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default LoginForm;\n\n"]},"metadata":{},"sourceType":"module"}